<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Virtual — Mastermind Bet</title>
<style>
  body{margin:0;background:#0b0f17;color:#eaf2ff;font:14px system-ui,Segoe UI,Roboto}
  header{display:flex;gap:12px;padding:12px;background:#111a2a;border-bottom:1px solid #1a253b}
  a{color:#cfe0ff;text-decoration:none;background:#18233a;border:1px solid #243353;padding:6px 10px;border-radius:999px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:12px;padding:12px}
  .card{background:#121826;border:1px solid #1a253b;border-radius:14px;overflow:hidden}
  .card h3{margin:0;padding:10px 12px;background:#192235;border-bottom:1px solid #1a253b}
  .shelf{padding:12px}
  .badge{display:inline-block;background:#223356;border:1px solid #2a416b;padding:4px 8px;border-radius:8px;margin:0 4px 4px 0}
</style>
</head>
<body>
<header>
  <a href="/pos">POS</a><a href="/admin">Admin</a><a href="/history">History</a>
  <div style="margin-left:auto">Virtual Dashboard</div>
</header>

<div class="grid" id="grid"></div>

<script>
async function load(){
  const leagues = await (await fetch('/api/competitions')).json();
  const grid = document.getElementById('grid');
  let html = '';
  for(const lg of leagues){
    const res = await (await fetch(`/virtual/league/${lg.code}`)).json();
    const first = res.fixtures?.[0];
    if(!first){ html += `<div class="card"><h3>${lg.code}</h3><div class="shelf">No fixtures</div></div>`; continue; }
    const mk = Object.keys(first.markets||{}).slice(0,4).map(k=>`<span class="badge">${k}</span>`).join('');
    html += `<div class="card">
      <h3>${lg.code} — next: ${new Date(first.kickoff).toLocaleTimeString()}</h3>
      <div class="shelf"><div>${first.home} vs ${first.away}</div><div>${mk}</div></div>
    </div>`;
  }
  grid.innerHTML = html;
}
load();
</script>
</body>
</html>
